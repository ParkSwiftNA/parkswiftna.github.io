<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Convenience Fee Calculator â€” ParkSwift</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0d1117;
    --surface: #161b22;
    --surface2: #1c2330;
    --border: #2d3748;
    --accent: #f0a500;
    --accent-dim: rgba(240,165,0,0.12);
    --green: #3ddc84;
    --green-dim: rgba(61,220,132,0.1);
    --text: #e6edf3;
    --muted: #7d8590;
    --danger: #f85149;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'IBM Plex Sans', sans-serif;
    min-height: 100vh;
    padding: 40px 20px;
  }

  /* Grid background */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(rgba(240,165,0,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(240,165,0,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
  }

  .container {
    max-width: 820px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
  }

  header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 48px;
    border-bottom: 1px solid var(--border);
    padding-bottom: 24px;
  }

  .logo-mark {
    width: 42px;
    height: 42px;
    background: var(--accent);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'IBM Plex Mono', monospace;
    font-weight: 600;
    font-size: 16px;
    color: #000;
    flex-shrink: 0;
  }

  .header-text h1 {
    font-size: 13px;
    font-weight: 500;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--muted);
  }

  .header-text h2 {
    font-size: 18px;
    font-weight: 600;
    color: var(--text);
    margin-top: 2px;
  }

  .badge {
    margin-left: auto;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    padding: 4px 10px;
    border: 1px solid var(--accent);
    color: var(--accent);
    text-transform: uppercase;
    letter-spacing: 0.08em;
  }

  .grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  @media (max-width: 600px) {
    .grid { grid-template-columns: 1fr; }
  }

  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 28px;
  }

  .card-title {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    font-weight: 500;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 24px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .card-title::before {
    content: '';
    display: inline-block;
    width: 6px;
    height: 6px;
    background: var(--accent);
  }

  .field {
    margin-bottom: 22px;
  }

  .field:last-child { margin-bottom: 0; }

  label {
    display: block;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 8px;
  }

  .input-wrap {
    position: relative;
    display: flex;
    align-items: center;
  }

  .input-prefix, .input-suffix {
    position: absolute;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 14px;
    color: var(--muted);
    pointer-events: none;
  }

  .input-prefix { left: 12px; }
  .input-suffix { right: 12px; }

  input[type="number"], input[type="range"] {
    width: 100%;
    background: var(--bg);
    border: 1px solid var(--border);
    color: var(--text);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 16px;
    padding: 12px 12px;
    outline: none;
    transition: border-color 0.2s;
    -moz-appearance: textfield;
  }

  input[type="number"]::-webkit-outer-spin-button,
  input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; }

  input[type="number"]:focus {
    border-color: var(--accent);
  }

  .has-prefix input[type="number"] { padding-left: 28px; }
  .has-suffix input[type="number"] { padding-right: 28px; }

  /* Range slider */
  input[type="range"] {
    -webkit-appearance: none;
    background: transparent;
    border: none;
    padding: 0;
    cursor: pointer;
    margin-top: 6px;
  }

  input[type="range"]::-webkit-slider-runnable-track {
    height: 4px;
    background: var(--border);
    border: none;
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    background: var(--accent);
    border: 2px solid var(--bg);
    border-radius: 0;
    margin-top: -7px;
    cursor: pointer;
  }

  input[type="range"]::-moz-range-track {
    height: 4px;
    background: var(--border);
  }

  input[type="range"]::-moz-range-thumb {
    width: 16px;
    height: 16px;
    background: var(--accent);
    border: 2px solid var(--bg);
    border-radius: 0;
    cursor: pointer;
  }

  .range-labels {
    display: flex;
    justify-content: space-between;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    color: var(--muted);
    margin-top: 4px;
  }

  .range-value {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 22px;
    font-weight: 600;
    color: var(--accent);
    margin-bottom: 4px;
    display: block;
  }

  /* Fee type toggle */
  .toggle-group {
    display: flex;
    border: 1px solid var(--border);
    overflow: hidden;
  }

  .toggle-group button {
    flex: 1;
    background: var(--bg);
    border: none;
    border-right: 1px solid var(--border);
    color: var(--muted);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 13px;
    font-weight: 500;
    padding: 10px;
    cursor: pointer;
    transition: all 0.15s;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .toggle-group button:last-child { border-right: none; }

  .toggle-group button.active {
    background: var(--accent);
    color: #000;
  }

  /* Results card */
  .results-card {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 28px;
    margin-top: 20px;
    position: relative;
    overflow: hidden;
  }

  .results-card::after {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--accent), transparent);
  }

  .results-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1px;
    background: var(--border);
    border: 1px solid var(--border);
    margin-top: 20px;
  }

  @media (max-width: 600px) {
    .results-grid { grid-template-columns: repeat(2, 1fr); }
  }

  .result-cell {
    background: var(--bg);
    padding: 20px 16px;
    text-align: center;
  }

  .result-label {
    font-size: 10px;
    font-weight: 500;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 8px;
  }

  .result-value {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 22px;
    font-weight: 600;
    color: var(--text);
  }

  .result-value.highlight { color: var(--green); }
  .result-value.accent { color: var(--accent); }

  /* Projection table */
  .proj-table {
    width: 100%;
    border-collapse: collapse;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 13px;
    margin-top: 20px;
  }

  .proj-table th {
    text-align: left;
    font-size: 10px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--muted);
    padding: 8px 12px;
    border-bottom: 1px solid var(--border);
  }

  .proj-table td {
    padding: 10px 12px;
    border-bottom: 1px solid rgba(45,55,72,0.5);
    color: var(--text);
  }

  .proj-table tr:last-child td { border-bottom: none; }

  .proj-table td:not(:first-child) { text-align: right; }
  .proj-table th:not(:first-child) { text-align: right; }

  .proj-table .revenue-col { color: var(--green); }
  .proj-table .fee-col { color: var(--accent); }

  /* Separator */
  .sep {
    height: 1px;
    background: var(--border);
    margin: 28px 0;
  }

  .section-title {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    font-weight: 500;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .section-title::before {
    content: '';
    display: inline-block;
    width: 6px;
    height: 6px;
    background: var(--accent);
  }

  .note {
    font-size: 11px;
    color: var(--muted);
    margin-top: 16px;
    line-height: 1.6;
    font-style: italic;
  }
</style>
</head>
<body>
<div class="container">

  <header>
    <div class="logo-mark">PS</div>
    <div class="header-text">
      <h1>ParkSwift</h1>
      <h2>Convenience Fee Calculator</h2>
    </div>
    <div class="badge">Revenue Tool</div>
  </header>

  <div class="grid">
    <!-- Inputs: Transactions -->
    <div class="card">
      <div class="card-title">Transaction Volume</div>

      <div class="field">
        <label>Daily Transactions</label>
        <div class="input-wrap">
          <input type="number" id="daily-txn" value="200" min="1" max="10000" oninput="calculate()">
        </div>
      </div>

      <div class="field">
        <label>Avg Transaction Value</label>
        <span class="range-value" id="atv-display">$12.00</span>
        <div class="input-wrap">
          <input type="range" id="atv-range" min="1" max="100" step="0.5" value="12" oninput="syncATV(this.value)">
        </div>
        <div class="range-labels"><span>$1</span><span>$25</span><span>$50</span><span>$75</span><span>$100</span></div>
        <div class="field" style="margin-top:12px; margin-bottom:0">
          <div class="input-wrap has-prefix">
            <span class="input-prefix">$</span>
            <input type="number" id="atv-input" value="12" min="0.01" step="0.01" oninput="syncATVInput(this.value)">
          </div>
        </div>
      </div>
    </div>

    <!-- Inputs: Fee -->
    <div class="card">
      <div class="card-title">Convenience Fee Config</div>

      <div class="field">
        <label>Fee Type</label>
        <div class="toggle-group">
          <button id="btn-pct" class="active" onclick="setFeeType('pct')">% Percent</button>
          <button id="btn-flat" onclick="setFeeType('flat')">$ Flat</button>
          <button id="btn-combo" onclick="setFeeType('combo')">Combined</button>
        </div>
      </div>

      <div class="field" id="field-pct">
        <label>Fee Percentage</label>
        <span class="range-value" id="fee-pct-display">3.00%</span>
        <input type="range" id="fee-pct-range" min="0.5" max="15" step="0.25" value="3" oninput="syncFeePct(this.value)">
        <div class="range-labels"><span>0.5%</span><span>5%</span><span>10%</span><span>15%</span></div>
        <div style="margin-top:12px">
          <div class="input-wrap has-suffix">
            <input type="number" id="fee-pct-input" value="3" min="0" step="0.25" oninput="syncFeePctInput(this.value)">
            <span class="input-suffix">%</span>
          </div>
        </div>
      </div>

      <div class="field" id="field-flat" style="display:none">
        <label>Flat Fee per Transaction</label>
        <div class="input-wrap has-prefix">
          <span class="input-prefix">$</span>
          <input type="number" id="fee-flat-input" value="0.35" min="0" step="0.01" oninput="calculate()">
        </div>
      </div>

      <div class="field" id="field-combo-pct" style="display:none">
        <label>% Component</label>
        <div class="input-wrap has-suffix">
          <input type="number" id="fee-combo-pct" value="2" min="0" step="0.25" oninput="calculate()">
          <span class="input-suffix">%</span>
        </div>
      </div>

      <div class="field" id="field-combo-flat" style="display:none">
        <label>+ Flat $ Component</label>
        <div class="input-wrap has-prefix">
          <span class="input-prefix">$</span>
          <input type="number" id="fee-combo-flat" value="0.15" min="0" step="0.01" oninput="calculate()">
        </div>
      </div>
    </div>
  </div>

  <!-- Results -->
  <div class="results-card">
    <div class="section-title">Per Transaction Breakdown</div>
    <div class="results-grid">
      <div class="result-cell">
        <div class="result-label">Base Fare</div>
        <div class="result-value" id="r-base">$12.00</div>
      </div>
      <div class="result-cell">
        <div class="result-label">Convenience Fee</div>
        <div class="result-value accent" id="r-fee">$0.36</div>
      </div>
      <div class="result-cell">
        <div class="result-label">Customer Pays</div>
        <div class="result-value highlight" id="r-total">$12.36</div>
      </div>
      <div class="result-cell">
        <div class="result-label">Effective Fee %</div>
        <div class="result-value accent" id="r-eff-pct">3.00%</div>
      </div>
    </div>

    <div class="sep"></div>

    <div class="section-title">Revenue Projections</div>

    <table class="proj-table">
      <thead>
        <tr>
          <th>Period</th>
          <th>Transactions</th>
          <th class="revenue-col">Gross Revenue</th>
          <th class="fee-col">Fee Revenue</th>
          <th>Avg per Txn</th>
        </tr>
      </thead>
      <tbody id="proj-body">
      </tbody>
    </table>

    <p class="note">* Fee revenue is the convenience fee collected, separate from parking revenue. Assumes consistent transaction volume.</p>
  </div>

</div>

<script>
  let feeType = 'pct';

  function setFeeType(type) {
    feeType = type;
    document.getElementById('btn-pct').classList.toggle('active', type === 'pct');
    document.getElementById('btn-flat').classList.toggle('active', type === 'flat');
    document.getElementById('btn-combo').classList.toggle('active', type === 'combo');

    document.getElementById('field-pct').style.display = type === 'pct' ? '' : 'none';
    document.getElementById('field-flat').style.display = type === 'flat' ? '' : 'none';
    document.getElementById('field-combo-pct').style.display = type === 'combo' ? '' : 'none';
    document.getElementById('field-combo-flat').style.display = type === 'combo' ? '' : 'none';

    calculate();
  }

  function syncATV(v) {
    document.getElementById('atv-display').textContent = '$' + parseFloat(v).toFixed(2);
    document.getElementById('atv-input').value = parseFloat(v).toFixed(2);
    calculate();
  }

  function syncATVInput(v) {
    const val = Math.min(Math.max(parseFloat(v) || 0, 1), 100);
    document.getElementById('atv-range').value = val;
    document.getElementById('atv-display').textContent = '$' + val.toFixed(2);
    calculate();
  }

  function syncFeePct(v) {
    document.getElementById('fee-pct-display').textContent = parseFloat(v).toFixed(2) + '%';
    document.getElementById('fee-pct-input').value = parseFloat(v).toFixed(2);
    calculate();
  }

  function syncFeePctInput(v) {
    const val = Math.min(Math.max(parseFloat(v) || 0, 0), 15);
    document.getElementById('fee-pct-range').value = val;
    document.getElementById('fee-pct-display').textContent = val.toFixed(2) + '%';
    calculate();
  }

  function getFee(atv) {
    if (feeType === 'pct') {
      const pct = parseFloat(document.getElementById('fee-pct-input').value) || 0;
      return atv * (pct / 100);
    } else if (feeType === 'flat') {
      return parseFloat(document.getElementById('fee-flat-input').value) || 0;
    } else {
      const pct = parseFloat(document.getElementById('fee-combo-pct').value) || 0;
      const flat = parseFloat(document.getElementById('fee-combo-flat').value) || 0;
      return atv * (pct / 100) + flat;
    }
  }

  function fmt(n) {
    return '$' + n.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
  }

  function fmtInt(n) {
    return n.toLocaleString('en-US');
  }

  function calculate() {
    const atv = parseFloat(document.getElementById('atv-input').value) || 0;
    const dailyTxn = parseInt(document.getElementById('daily-txn').value) || 0;
    const fee = getFee(atv);
    const total = atv + fee;
    const effPct = atv > 0 ? (fee / atv * 100) : 0;

    document.getElementById('r-base').textContent = fmt(atv);
    document.getElementById('r-fee').textContent = fmt(fee);
    document.getElementById('r-total').textContent = fmt(total);
    document.getElementById('r-eff-pct').textContent = effPct.toFixed(2) + '%';

    const periods = [
      { label: 'Daily', txns: dailyTxn },
      { label: 'Weekly', txns: dailyTxn * 7 },
      { label: 'Monthly', txns: dailyTxn * 30 },
      { label: 'Annual', txns: dailyTxn * 365 },
    ];

    const tbody = document.getElementById('proj-body');
    tbody.innerHTML = periods.map(p => {
      const gross = p.txns * total;
      const feeRev = p.txns * fee;
      return `
        <tr>
          <td>${p.label}</td>
          <td>${fmtInt(p.txns)}</td>
          <td class="revenue-col">${fmt(gross)}</td>
          <td class="fee-col">${fmt(feeRev)}</td>
          <td>${fmt(total)}</td>
        </tr>
      `;
    }).join('');
  }

  calculate();
</script>
</body>
</html>
